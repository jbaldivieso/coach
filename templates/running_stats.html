{% extends "base.html" %} {% block title %}Running Stats - Coach{% endblock %}
{% block extra_css %}
<style>
    h2 {
        color: #363636;
    }
    .days-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 1rem;
        padding: 2rem 1rem;
        text-align: center;
    }

    .day-cell {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        min-height: 100px;
    }

    .day-label {
        font-size: 1rem;
        font-weight: 600;
        color: #363636;
    }

    .distance-circle {
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 0.875rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
        flex-shrink: 0;
    }

    .distance-circle:hover {
        transform: scale(1.1);
    }

    .distance-circle.empty {
        background: #f5f5f5;
        border: 2px dashed #dbdbdb;
        color: #b5b5b5;
    }

    .distance-text {
        font-size: 0.75rem;
        color: #7a7a7a;
        margin-top: 0.25rem;
    }

    .week-summary {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .summary-item {
        text-align: center;
    }

    .summary-value {
        /*font-size: 1.5rem;*/
        font-weight: bold;
        color: #363636;
    }

    .summary-label {
        font-size: 0.875rem;
        color: #7a7a7a;
        text-transform: uppercase;
    }

    /* Mobile responsiveness */
    @media screen and (max-width: 768px) {
        .days-grid {
            gap: 0.5rem;
            padding: 1.5rem 0.5rem;
        }

        .day-cell {
            min-height: 80px;
            gap: 0.25rem;
        }

        .distance-circle {
            font-size: 0.7rem;
            max-width: 70px !important;
            max-height: 70px !important;
            min-width: 30px !important;
            min-height: 30px !important;
        }

        .distance-circle.empty {
            width: 30px !important;
            height: 30px !important;
        }

        .distance-text {
            font-size: 0.65rem;
        }

        /*.week-header {
            padding: 0.75rem;
        }*/

        .week-summary {
            font-size: 0.875rem;
        }

        .summary-value {
            /*font-size: 1.25rem;*/
        }

        .summary-label {
            font-size: 0.7rem;
        }
    }

    /* Extra small screens (iPhone 12 Pro and similar) */
    @media screen and (max-width: 430px) {
        .days-grid {
            gap: 0.25rem;
            padding: 0 0.25rem 1rem;
        }

        .day-cell {
            min-height: 60px;
            gap: 0.2rem;
        }

        .distance-circle {
            font-size: 0.6rem;
            width: var(--size-mobile) !important;
            height: var(--size-mobile) !important;
        }

        .distance-circle.empty {
            width: 25px !important;
            height: 25px !important;
        }

        .distance-text {
            font-size: 0.55rem;
        }
    }
</style>
{% endblock %} {% block content %}
<h1 class="title">Running Stats</h1>

{% if weeks %} {% set day_names = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',
'Sun'] %}
<div class="days-grid">
    {% for day in day_names %}
    <div class="day-cell">
        <div class="day-label">{{ day }}</div>
    </div>
    {% endfor %} {% for week in weeks %}
</div>
<div class="week-card">
    <div class="week-header">
        <h2>{{ week.start_date_display }} - {{ week.end_date_display }}</h2>
        <div class="week-summary">
            <div class="summary-item">
                <div class="summary-value">
                    {{ "%.0f"|format(week.total_elevation_ft) }}'
                </div>
            </div>
            <div class="summary-item">
                <div class="summary-value">
                    {{ "%.1f"|format(week.total_distance_miles) }}
                    <span class="summary-label">Miles</span>
                </div>
            </div>
        </div>
    </div>

    <div class="days-grid">
        {% for day in week.days %}
        <div class="day-cell">
            {% if day.distance_miles > 0 %} {% set size = (40 +
            (day.distance_miles * 5))|int %} {% set size = [size, 120]|min %} {%
            set size_mobile = ([25 + (day.distance_miles * 2.5), 50]|min)|int %}
            <div
                class="distance-circle"
                style="width: {{ size }}px; height: {{ size }}px; --size-mobile: {{ size_mobile }}px;"
            >
                {{ "%.1f"|format(day.distance_miles) }}
            </div>
            {% if day.count > 1 %}
            <div class="distance-text">{{ day.count }} runs</div>
            {% endif %} {% else %}
            <div
                class="distance-circle empty"
                style="width: 40px; height: 40px"
            >
                â€”
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endfor %} {% if has_more %}
<div class="has-text-centered mt-5">
    <a
        href="{{ url_for('running_stats', weeks=weeks_shown + 6) }}"
        class="button is-primary is-medium"
    >
        <span class="icon"><i class="fas fa-chevron-down"></i></span>
        <span>Load 6 More Weeks</span>
    </a>
</div>
{% endif %} {% else %}
<div class="notification is-info is-light">
    <p>
        No running data available yet. Sync your Strava activities to see stats.
    </p>
    <p class="mt-3">Run: <code>python sync_strava.py</code></p>
</div>
{% endif %} {% endblock %}
